<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>3D Pinball for Windows - Space Cadet</title>
    <style>
      :root {
        --ActiveBorder: rgb(212, 208, 200);
        --ActiveTitle: rgb(10, 36, 106);
        --AppWorkspace: rgb(128, 128, 128);
        --Background: rgb(0, 0, 0);
        --ButtonAlternateFace: rgb(192, 192, 192);
        --ButtonDkShadow: rgb(64, 64, 64);
        --ButtonFace: rgb(212, 208, 200);
        --ButtonHilight: rgb(255, 255, 255);
        --ButtonLight: rgb(212, 208, 200);
        --ButtonShadow: rgb(128, 128, 128);
        --ButtonText: rgb(0, 0, 0);
        --GradientActiveTitle: rgb(166, 202, 240);
        --GradientInactiveTitle: rgb(192, 192, 192);
        --GrayText: rgb(128, 128, 128);
        --Hilight: rgb(10, 36, 106);
        --HilightText: rgb(255, 255, 255);
        --HotTrackingColor: rgb(0, 0, 128);
        --InactiveBorder: rgb(212, 208, 200);
        --InactiveTitle: rgb(128, 128, 128);
        --InactiveTitleText: rgb(212, 208, 200);
        --InfoText: rgb(0, 0, 0);
        --InfoWindow: rgb(255, 255, 225);
        --Menu: rgb(212, 208, 200);
        --MenuBar: rgb(192, 192, 192);
        --MenuHilight: rgb(0, 0, 128);
        --MenuText: rgb(0, 0, 0);
        --Scrollbar: rgb(212, 208, 200);
        --TitleText: rgb(255, 255, 255);
        --Window: rgb(255, 255, 255);
        --WindowFrame: rgb(0, 0, 0);
        --WindowText: rgb(0, 0, 0);
      }

      body {
        font-family: Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--Background);
        text-align: center;
        display: flex;
        flex-direction: column; /* Stack children vertically */
        align-items: center;     /* Center horizontally */
        justify-content: center; /* Center vertically */
        height: 100vh;          /* Full height of the viewport */
        margin: 0;              /* Remove default margin */
        overflow: hidden;       /* Prevent scrollbars */
      }

      .active.window {
        width: 900px;          /* Set the width for 150% scale */
        height: 660px;         /* Set the height for 150% scale */
        background-color: var(--ButtonFace);
        border: 1px solid var(--ActiveBorder);
        box-shadow: -0.5px -0.5px 0 0.5px var(--ButtonHilight),
          0 0 0 1px var(--ButtonShadow),
          -0.5px -0.5px 0 1.5px var(--ButtonLight),
          0 0 0 2px var(--ButtonDkShadow);
      }

      canvas.emscripten {
        border: 0 none;
        background-color: #000;
        width: 900px;          /* Set width for 150% zoom */
        height: 660px;         /* Set height for 150% zoom */
      }

      .button-container {
        margin-top: 20px;      /* Space between canvas and buttons */
      }

      button {
        margin: 0 10px;        /* Space between buttons */
        padding: 10px 20px;    /* Padding for buttons */
        font-size: 16px;        /* Font size for button text */
        cursor: pointer;        /* Pointer cursor on hover */
        background-color: var(--ButtonFace);
        color: var(--ButtonText);
        border: 1px solid var(--ActiveBorder);
        border-radius: 5px;    /* Rounded corners for buttons */
        box-shadow: -0.5px -0.5px 0 0.5px var(--ButtonHilight),
          0 0 0 1px var(--ButtonShadow),
          -0.5px -0.5px 0 1.5px var(--ButtonLight),
          0 0 0 2px var(--ButtonDkShadow);
      }

      button:active {
        box-shadow: -0.5px -0.5px 0 0.5px var(--ButtonShadow),
          0 0 0 1px var(--ButtonShadow),
          -0.5px -0.5px 0 1.5px var(--WindowFrame),
          0 0 0 2px var(--WindowFrame);
      }
    </style>
  </head>
  <body>
    <div class="active window">
      <div class="emscripten" id="status" style="display: none"></div>
      <div class="emscripten">
        <progress
          id="progress"
          max="1"
          value="0"
          hidden=""
          style="display: none"
        ></progress>
      </div>
      <canvas
        class="emscripten"
        id="canvas"
        oncontextmenu="event.preventDefault()"
        style="cursor: default"
        tabindex="-1"
        width="600"
        height="440"
      ></canvas>
    </div>
    
    <!-- Button container -->
    <div class="button-container">
      <button id="leftClick">Left Click</button>
      <button id="rightClick">Right Click</button>
      <button id="spaceBar">Space</button>
    </div>

    <script>
      var statusElement = document.getElementById("status"),
        progressElement = document.getElementById("progress"),
        Module = {
          preRun: [],
          postRun: [],
          print: (function () {
            var e = document.getElementById("output");
            return (
              e && (e.value = ""),
              function (e) {
                arguments.length > 1 &&
                  (e = Array.prototype.slice.call(arguments).join(" "));
                console.log(e);
              }
            );
          })(),
          printErr: function (e) {
            arguments.length > 1 &&
              (e = Array.prototype.slice.call(arguments).join(" "));
            console.error(e);
          },
          canvas: (function () {
            var e = document.getElementById("canvas");
            e.addEventListener(
              "webglcontextlost",
              function (e) {
                alert("WebGL context lost. You will need to reload the page."),
                  e.preventDefault();
              },
              !1
            );
            return e;
          })(),
          setStatus: function (e) {
            if (
              (Module.setStatus.last ||
                (Module.setStatus.last = { time: Date.now(), text: "" }),
              e !== Module.setStatus.last.text)
            ) {
              var t = e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)/),
                n = Date.now();
              if (!(t && n - Module.setStatus.last.time < 30)) {
                if (
                  ((Module.setStatus.last.time = n),
                  (Module.setStatus.last.text = e),
                  t)
                )
                  (e = t[1]),
                    (progressElement.value = 100 * parseInt(t[2])),
                    (progressElement.max = 100 * parseInt(t[4])),
                    (progressElement.hidden = !1);
                else
                  (progressElement.value = null),
                    (progressElement.max = null),
                    (progressElement.hidden = !0),
                    (document.getElementById("canvas").style.display = "");
                statusElement.innerHTML = e;
                "" === e
                  ? ((statusElement.style.display = "none"),
                    (progressElement.style.display = "none"))
                  : ((statusElement.style.display = ""),
                    (progressElement.style.display = ""));
              }
            }
          },
          totalDependencies: 0,
          monitorRunDependencies: function (e) {
            this.totalDependencies = Math.max(this.totalDependencies, e);
            Module.setStatus(
              e
                ? "Preparing... (" +
                    (this.totalDependencies - e) +
                    "/" +
                    this.totalDependencies +
                    ")"
                : "All downloads complete."
            );
          },
        };

      Module.setStatus("Downloading..."),
        (window.onerror = function () {
          Module.setStatus("Exception thrown, see JavaScript console"),
            (Module.setStatus = function (e) {
              e && Module.printErr("[post-exception status] " + e);
            });
        });

      // Button state management
      var leftClickPressed = false;
      var rightClickPressed = false;
      var spaceBarPressed = false;

      // Button event listeners
      document.getElementById("leftClick").onclick = function () {
        console.log("Left Click Button Pressed");
        // Trigger left click action
        Module.canvas.dispatchEvent(new MouseEvent('mousedown', { button: 0 }));
        Module.canvas.dispatchEvent(new MouseEvent('mouseup', { button: 0 }));
      };

      document.getElementById("rightClick").onclick = function () {
        console.log("Right Click Button Pressed");
        // Trigger right click action
        Module.canvas.dispatchEvent(new MouseEvent('mousedown', { button: 2 }));
        Module.canvas.dispatchEvent(new MouseEvent('mouseup', { button: 2 }));
      };

      document.getElementById("spaceBar").onclick = function () {
        console.log("Space Bar Button Pressed");
        // Trigger space action
        document.dispatchEvent(new KeyboardEvent('keydown', { key: ' ' }));
        document.dispatchEvent(new KeyboardEvent('keyup', { key: ' ' }));
      };
    </script>
    <script async="" src="/pinball/SpaceCadetPinball.js"></script>
  </body>
</html>
